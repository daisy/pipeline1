
 Initial setup
 --------------

   1. Download and install NSIS from http://nsis.sourceforge.net
   
	This downloads an application and installs it in the Program Files directory. 
	After installation, a right-click on a file name opens a menu with a choice to compile a nsis file.
	NSIS can be found under Start/Programs/NSIS.  
   
   
   2. Install the EclipseNSIS plugin http://eclipsensis.sourceforge.net/#download
   
	   There are two options on this page, one to directly download and place in the eclipse directory, or to use Install Manager in Eclipse which is the preferred method.

	   To run the Install Manager, open Eclipse, choose Help/Software Updates/Find and Install/ for the first dialog box.

	   Choose the 2nd item, "Search for New Features to Install".  Choose Next.

	   The dialog, "Update Sites to Visit" appears.  Choose the button, "New Remote Site" for the next dialog box.

	   Complete the two lines with a name (nsisPlugin, or whatever) and url, http://eclipsensis.sf.net/update  Choose OK.

	   Follow the wizard.  NSIS will be (should be?) installed as a plug-in in Eclipse. 
	   
	   To use the NSIS plugin, select a .nsi file.  The NSIS menu will appear between the Project and Run menus.

  
   
   3. Download and install the ZipDLL plugin from http://nsis.sourceforge.net/wiki/ZipDLL
      Remember to fix the bug as stated on the download page.
      
      	To use ZipDLL:
	
	Extract ZipDLL.dll to directory Plugins in your NSIS installation
        Extract ZipDLL.nsh to directory Include in your NSIS installation 
      
      Open the .nsh file in a text editor to change and fix the bug stated on the website.
      	

   4.  Correct the parameters in the install.nsi file
       
     	a.   Make sure the defines in the 'Defines' part are correct. Most importantly,make sure the ECLIPSEDIR, JYTHONDIR and LAMEDIR defines are correct.
     
		These directories must point to the proper file.  For example, starting on line 57:

		; Path to Eclipse directory
		!define ECLIPSEDIR "C:\Program Files\eclipse"

		; Path to and name of the Jython install JAR
		!define JYTHONDIR "C:\jython"
		!define JYTHONNAME "jython_Release_2_2alpha1.jar"

		; Path to and name of the LAME install ZIP

		!define LAMEDIR "C:\lame3.96.1"
		!define LAMENAME "lame3.96.1.zip"
     	
     

     	b.  (optionally) Change the value of the 'OutFile' command in the'Installer attributes' part.

     	c.  Apply any changes to the 'DMFC', 'GUI', and 'Other' sections.
     
     		Some changes, look for changes in swt version, different .jar files to be included, updates on cvs
     



 Download dependencies
 -----------------------

  1.  Lame for windows can be downloaded at http://www.rarewares.org/mp3.html. Use the latest
   stable release.
   
   	As of August 15, 2006, the latest stable release is lame3.96.1
   	 
   	The script uses the lame3.96.1.zip file.  There is no need to unzip it.
   	   	   	

  2.  Jython can be downloaded at http://www.jython.org. Use release 2.2 or newer
   (as of august 2006 this is the development version)
   
   	As of August 15, 2006, the latest version was jython_Release_2_2alpha1.jar.  
   	
   	The script uses this jar file. 
   
   


Start the Build
----------------
   
  1. DMFC and Util library
     Use the build.xml ANT script in the DMFC project to build DMFC and the
     util library. Target names are 'buildUtil' and 'buildDMFC-NSIS'.
     
     
     	In Eclipse, right-click on the dmfc/build.xml file.  
     	
     	From the menu, choose "Run As", then "Ant Build.." (the second Ant Build choice). A dialog appears.
     	
     	A list of "targets" with checkboxes appears.  Check the two targets, buildUtil and buildUtil-NSIS.
     	
     	Choose Run.  
     	
     	The DMFC and the util library are built.  
     

 2.  DMFC  GUI
   
     1. First, build the dmfcgui.exe using the dmfcgui.nsi NSIS script in the DMFCGUI project.
     This file will seldom need to be rebuilt.
     
     	In Windows Explorer, go to src/dmfcgui/dmfcgui.nsi, right-click and choose Compile Nsis.
     	
     	The dmfcgui.exe is built and placed in the same directory as the dmfcgui.nsi script.
     

     2. Next, Use the build.xml ANT script in the DMFCGUI project to build the GUI.
     Target name is 'buildZip-NSIS'.
     
     	Same as the DMFC, see above.
     
     


   CREATE THE INSTALLER
   ----------------------
   
	   In Windows Explorer,find the installer.nsi file, right-click, and choose Compile NSIS from the menu.

	   In the current script, the install file will be placed in the ECLIPSEDIR\dmfcgui\dist folder.
	   
	   The file is named dmfcgui-1-0b1.exe
	   
	   Make sure that .NET Framework 2.0 is installed on your machine.  If not, you may download it from
	   
	   http://www.microsoft.com/downloads/details.aspx?FamilyID=0856EACB-4362-4B0D-8EDD-AAB15C5E04F5&displaylang=en
	   
	   After .NET is installed,  run the dmfcgui-1-0b1.exe file to install dmfc in the Start/Programs menu. 
	   
	   
	[this text can become a part of the dmfc release technician handbook]

** DMFC release - archives overview **

This is a summary overview of the archives (and their corresponding names) 
that need to be produced (using existing ant scripts) when a new DMFC release is made.

Note that we avoid to use date strings in the filenames, except for the installer.
Except for the installer, date strings (which are version identifiers across the board) are carried in internal Version.java classes.

Numbers marked with a (*) are to be put on the sourceforge release system. The DMFC archives should be
made available for download as a DMFC release, and the DMFCGUI archives should be made available as
DMFCGUI releases.

1. DMFC Archives
  1.1* org.daisy.util.jar  
    This is the binary version of the org.daisy.util package, 
    in which Version.java has been updated to carry the cut date
  1.2* org.daisy.util-src.zip 
    This is the source version of the org.daisy.util package, 
    in which Version.java has been updated to carry the cut date
  1.3 org.daisy.util-docs.zip 
    This is the javadoc from the org.daisy.util package, with visibility level protected. 
    The javadocs are also published on daisymfc.sf.net/apiref/util/    
  1.4* org.daisy.dmfc.zip 
    This is the (non-jarred) binary version of the dmfc framework and transformers,
    in which Version.java has been updated to carry the cut date
  1.5* org.daisy.dmfc-src.zip
    This is the source version of the dmfc framework and transformers,
    in which Version.java has been updated to carry the cut date 
  1.6 org.daisy.dmfc-framework-docs.zip
    This is the javadoc from the org.daisy.dmfc package, with visibility level protected. 
    The javadocs are also published on daisymfc.sf.net/apiref/dmfc/framework    
  1.7 org.daisy.dmfc-transformers-docs.zip
    This is the javadoc from the transformers, with visibility level protected. 
    The javadocs are also published on daisymfc.sf.net/apiref/dmfc/transformers    


2. DMFCGUI Archives
  2.1* org.daisy.dmfc.gui.jar
    Binary version, in which Version.java has been updated to carry the cut date
  2.2* org.daisy.dmfc.gui-src.zip
    Source versionin which Version.java has been updated to carry the cut date
  2.3 org.daisy.dmfc.gui-docs.zip
    Javadoc pack. If daisymfcgui has a website, javadocs published there.
    (unsure atm whether we want to spend time on separate daisymfcgui webpages.)

3. Installer
  3.1 dmfc-install-yyyy-mm-dd.exe
    This is the convenience installer, published in the members area of daisy.org
       
	  
	   
	   
   
   

