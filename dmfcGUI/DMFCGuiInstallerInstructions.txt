Release Technician Instructions/Manual


 Downloads Required to Create the Install package
 -------------------------------------------------

   1. Download and install NSIS from http://nsis.sourceforge.net
   
	This downloads an application and installs it in the Program Files directory. 
	After installation, a right-click on a file name opens a menu with a choice to compile a nsis file.
	NSIS can be found under Start/Programs/NSIS.  
   
   
   2. Install the EclipseNSIS plugin http://eclipsensis.sourceforge.net/#download
   
	There are two options on this page, one to directly download and place in the eclipse directory, or to use Install Manager in Eclipse which is the preferred method.

	To run the Install Manager, open Eclipse, choose Help/Software Updates/Find and Install/ for the first dialog box.

	Choose the 2nd item, "Search for New Features to Install".  Choose Next.

	The dialog, "Update Sites to Visit" appears.  Choose the button, "New Remote Site" for the next dialog box.

	Complete the two lines with a name (nsisPlugin, or whatever) and url, http://eclipsensis.sf.net/update  Choose OK.

	Follow the wizard.  NSIS will be (should be?) installed as a plug-in in Eclipse. 

	To use the NSIS plugin, select a .nsi file.  The NSIS menu will appear between the Project and Run menus.

  
   
   3. Download and install the ZipDLL plugin from http://nsis.sourceforge.net/wiki/ZipDLL
      Remember to fix the bug as stated on the download page.
      
      	To use ZipDLL:
	
	Extract ZipDLL.dll to directory Plugins in your NSIS installation
        Extract ZipDLL.nsh to directory Include in your NSIS installation 
      
      Open the .nsh file in a text editor to change and fix the bug stated on the website.
      	

   4. Correct the parameters in the install.nsi file
       
     	a.   Make sure the defines in the 'Defines' part are correct. Most importantly,make sure the ECLIPSEDIR, JYTHONDIR and LAMEDIR defines are correct.
     
		These directories must point to the proper file.  For example, starting on line 57:

		; Path to Eclipse directory
		!define ECLIPSEDIR "C:\Program Files\eclipse"

		; Path to and name of the Jython install JAR
		!define JYTHONDIR "C:\jython"
		!define JYTHONNAME "jython_Release_2_2alpha1.jar"

		; Path to and name of the LAME install ZIP

		!define LAMEDIR "C:\lame3.96.1"
		!define LAMENAME "lame3.96.1.zip"
     	
     

     	b.  (optionally) Change the value of the 'OutFile' command in the'Installer attributes' part.

     	c.  Apply any changes to the 'DMFC', 'GUI', and 'Other' sections.
     
     		Some changes, look for changes in swt version, different .jar files to be included, updates on cvs
     



 More Download Dependencies
 -----------------------

  1.  Lame for windows can be downloaded at http://www.rarewares.org/mp3.html. Use the latest
   stable release.
   
   	As of August 15, 2006, the latest stable release is lame3.96.1
   	 
   	The script uses the lame3.96.1.zip file.  There is no need to unzip it.
   	   	   	

  2.  Jython can be downloaded at http://www.jython.org. Use release 2.2 or newer
   (as of august 2006 this is the development version)
   
   	As of August 15, 2006, the latest version was jython_Release_2_2alpha1.jar.  
   	
   	The script uses this jar file. 
   
   


Start the Build
----------------
   
  1. DMFC and Util library
     Use the build.xml ANT script in the DMFC project to build DMFC and the
     util library. Target names are 'buildUtil' and 'buildDMFC-NSIS'.
     
     
     	In Eclipse, right-click on the dmfc/build.xml file.  
     	
     	From the menu, choose "Run As", then "Ant Build.." (the second Ant Build choice). A dialog appears.
     	
     	A list of "targets" with checkboxes appears.  Check the two targets, buildUtil and buildUtil-NSIS.
     	
     	Choose Run.  
     	
     	The DMFC and the util library are built.  
     

 2.  DMFC  GUI
   
     1. First, build the dmfcgui.exe using the dmfcgui.nsi NSIS script in the DMFCGUI project.
     This file will seldom need to be rebuilt.
     
     	In Windows Explorer, go to src/dmfcgui/dmfcgui.nsi, right-click and choose Compile Nsis.
     	
     	The dmfcgui.exe is built and placed in the same directory as the dmfcgui.nsi script.
     

     2. Next, Use the build.xml ANT script in the DMFCGUI project to build the GUI.
     Target name is 'buildZip-NSIS'.
     
     	Same as the DMFC, see above.
     
     


Create the Installer for DMFC and GUI
-------------------------------------
   
	1.   In Windows Explorer,find the installer.nsi file, right-click, and choose Compile NSIS from the menu.

	2.  In the current script, the install file will be placed in the ECLIPSEDIR\dmfcgui\dist folder.
	   
	3.   The file is named dmfcgui-1-0b1.exe
	   
	4.   Make sure that .NET Framework 2.0 is installed on your machine.  If not, you may download it from
	   
	   http://www.microsoft.com/downloads/details.aspx?FamilyID=0856EACB-4362-4B0D-8EDD-AAB15C5E04F5&displaylang=en
	   
	5.   After .NET is installed,  run the dmfcgui-1-0b1.exe file to install dmfc in the Start/Programs menu. 
	   
	   
	

Place build files on Sourceforge
-----------------------------------

The DMFC and the GUI are placed on SourceForge as a project release.  The following describes the files to be placed on each.

** DMFC release - archives overview **

This is a summary overview of the archives (and their corresponding names) 
that need to be produced (using existing ant scripts) when a new DMFC release is made.

Note that we avoid to use date strings in the filenames, except for the installer.
Except for the installer, date strings (which are version identifiers across the board) are carried in internal Version.java classes.

Numbers marked with a (*) are to be put on the sourceforge release system. The DMFC archives should be
made available for download as a DMFC release, and the DMFCGUI archives should be made available as
DMFCGUI releases.

1. DMFC Archives
  1.1* org.daisy.util.jar  
    This is the binary version of the org.daisy.util package, 
    in which Version.java has been updated to carry the cut date
  1.2* org.daisy.util-src.zip 
    This is the source version of the org.daisy.util package, 
    in which Version.java has been updated to carry the cut date
  1.3 org.daisy.util-docs.zip 
    This is the javadoc from the org.daisy.util package, with visibility level protected. 
    The javadocs are also published on daisymfc.sf.net/apiref/util/    
  1.4* org.daisy.dmfc.zip 
    This is the (non-jarred) binary version of the dmfc framework and transformers,
    in which Version.java has been updated to carry the cut date
  1.5* org.daisy.dmfc-src.zip
    This is the source version of the dmfc framework and transformers,
    in which Version.java has been updated to carry the cut date 
  1.6 org.daisy.dmfc-framework-docs.zip
    This is the javadoc from the org.daisy.dmfc package, with visibility level protected. 
    The javadocs are also published on daisymfc.sf.net/apiref/dmfc/framework    
  1.7 org.daisy.dmfc-transformers-docs.zip
    This is the javadoc from the transformers, with visibility level protected. 
    The javadocs are also published on daisymfc.sf.net/apiref/dmfc/transformers    


2. DMFCGUI Archives
  2.1* org.daisy.dmfc.gui.jar
    Binary version, in which Version.java has been updated to carry the cut date
  2.2* org.daisy.dmfc.gui-src.zip
    Source versionin which Version.java has been updated to carry the cut date
  2.3 org.daisy.dmfc.gui-docs.zip
    Javadoc pack. If daisymfcgui has a website, javadocs published there.
    (unsure atm whether we want to spend time on separate daisymfcgui webpages.)
  2.4* org.daisy.dmfc.gui-extras.zip
  	Includes scripts and license information




Place Installer on the DAISY Web Site
----------------------------------------

1.  The final file to be placed on the web site will be named dmfcgui-1.0b1.exe (as of 8/25/2006)

2.  Published in the tools area, add this to the tools and the downloads database.

3.  The file (2006/8/25) is 16 mb, and the DAISY server times out when it tries to load. The round-about solution to this problem is as follows:
 
 	- Login to the DAISY Web Site - you must be an administrator and go to the Admin Page
 	- From the sidebar, choose Tools
 	- If necessary, Edit the record, DAISY multi-format converter and GUI. (This record should not need changes.)
 	-  From the sidebar, choose Downloads.
 	-  Create a small text file of the same name as the installer, dmfcgui-1.0b1.exe
 	-  Access is only available to members of the DAISY Consortium.  Select the correct access level.
 	-  Update the table with the incorrect file.
 	-  Use an ftp client to overwrite the dmfcgui-1.0b1.exe incorrect text file with the correct, 16Mb file.
 	
 4.  Future versions of the installer may be copied to the server via ftp.  
 

Create a SourceForge Release
----------------------------------

1.  Login to sourceforge - www.sf.net

2.  Choose the project to create a release from the "My Projects" menu.

3.  Only administrators or release-technicians of a project may create a release.

4.  From the top menu, choose "Admin".  Another menu will appear below the top menu.

5.  From the lower, second menu, choose "File Releases".

6.  At the bottom of the File Releases page, choose [AddRelease]

7.  For creating the initial package, complete the bottom area, 

	New Release Name - daiysmfcgui_FPA
	Of which Package - daisymfcgui
	
8.  On a new page is the following gui:

Step 1:  Edit Existing Release
         This should be filled in.  You may add or update usernotes.
         
         FTP to upload.sourcefourge.net
         username:  anonymous
         password:  your email, in my case laurie.sherve@montana.com
         
Step 2 Add files to Release

	Check all files that you want to add to the release.  
	Choose the "Submit" button
	All chosen files appear in the list below.
	
Step 3 Edit files in the release
	
	Choose the OS and other associated info for each file.
	"Submit"
	
You will see the "download" link on the project home page.


Section 211. Dealing with the generated JavaDoc.
------------------------------------------------

1.  Using the javadoc generated by the Ant scripts,
  a) upload the non-archived files to the three respective subdirs  of http://daisymfc.sourceforge.net/api/
  b) also upload the archives to the root of the three subdirs.

2. Verify that the six links in the doc http://daisymfc.sourceforge.net/api/index.html work.

	     
	   
   
   

