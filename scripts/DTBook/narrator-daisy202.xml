<taskScript version="1.0">
	<name>Narrator (Daisy 2.02)</name>
	<description>Converts a DTBook file to a complete Daisy 2.02 file set</description>
	
	<property name="input" value="FIXME" type="application/x-dtbook+xml"/>
	<property name="outputPath" value="FIXME" type="application/x-filesystemDirectory"/>
	
	<!-- *************************
	      DTBook input validation 
	     ************************* -->
	<task name="int_daisy_validator" interactive="false">
		<parameter>
			<name>input</name>
			<value>${input}</value>
		</parameter>
		<parameter>
			<name>schemas</name>
			<value>-//TPB//SCH dtbook 2005 Narrator//EN</value>
		</parameter>
		<parameter>
			<name>abortThreshold</name>
			<value>WARNING</value>
		</parameter>
	</task>
	
	
	<!-- ****************************
	      Abbr and Acronym detection 
	     **************************** -->
	<task name="se_tpb_xmldetection" interactive="false">
		<parameter>
			<name>input</name>
			<value>${input}</value>
		</parameter>		
		<parameter id="abbr">
			<name>output</name>
			<value>${outputPath}/01-abbracro.xml</value>
		</parameter>		
		<parameter>
			<name>doAbbrAcronymDetection</name>
			<value>true</value>
		</parameter>		
		<parameter>
			<name>doSentenceDetection</name>
			<value>false</value>
		</parameter>		
		<parameter>
			<name>doWordDetection</name>
			<value>false</value>
		</parameter>
	</task>
	
	<!-- *********************
	      Structure announcer 
	     ********************* -->
	<task name="se_tpb_annonsator" interactive="false">
		<parameter ref="abbr">
			<name>input</name>
			<value>${outputPath}/01-abbracro.xml</value>
		</parameter>		
		<parameter id="str">
			<name>output</name>
			<value>${outputPath}/02-struct.xml</value>
		</parameter>		
	</task>
	
	<!-- ********************
	      Sentence detection 
	     ******************** -->
	<task name="se_tpb_xmldetection" interactive="false">
		<parameter ref="str">
			<name>input</name>
			<value>${outputPath}/02-struct.xml</value>
		</parameter>		
		<parameter id="sen">
			<name>output</name>
			<value>${outputPath}/03-sent.xml</value>
		</parameter>		
		<parameter>
			<name>doAbbrAcronymDetection</name>
			<value>false</value>
		</parameter>		
		<parameter>
			<name>doSentenceDetection</name>
			<value>true</value>
		</parameter>		
		<parameter>
			<name>doWordDetection</name>
			<value>false</value>
		</parameter>
	</task>
	
	<!-- *****************************
	      Synchronization point normalization 
	     ***************************** -->
	<task name="se_tpb_syncPointNormalizer" interactive="false">
		<parameter ref="sen">
			<name>input</name>
			<value>${outputPath}/03-sent.xml</value>
		</parameter>		
		<parameter id="mix">
			<name>output</name>
			<value>${outputPath}/04-syncpoint.xml</value>
		</parameter>
	</task>
	
	<!-- ******************
	      Speech Generator
	     ****************** -->
	<task name="se_tpb_speechgenerator" interactive="false">
		<parameter>
			<name>inputFilename</name>
			<value>${outputPath}/04-syncpoint.xml</value>
		</parameter>
		<parameter>
			<name>outputDirectory</name>
			<value>${outputPath}/z3986/</value>
		</parameter>
		<parameter>
			<name>outputFilename</name>
			<value>${outputPath}/z3986/06-speechgen.xml</value>
		</parameter>
	</task>


	<!-- ******************
	      File Set Creator
	     ****************** -->
	<task name="se_tpb_filesetcreator" interactive="false">
		<parameter>
			<name>outputDirectory</name>
			<value>${outputPath}/z3986</value>
		</parameter>
		<parameter>
			<name>manuscriptFilename</name>
			<value>${outputPath}/z3986/06-speechgen.xml</value>
		</parameter>
		<parameter>
			<name>outputDTBFilename</name>
			<value>${outputPath}/z3986/07-dtbook.xml</value>
		</parameter>		
	</task>
	
	
	<!-- *************
	      Error Scout
	     ************* -->
	<task name="se_tpb_dtbErrorScout" interactive="false">
		<parameter>
			<name>manifest</name>
			<value>${outputPath}/z3986/06-speechgen.opf</value>
		</parameter>		
		<parameter>
			<name>scoutLevel</name>
			<value>MAXED</value>
		</parameter>
		<parameter>
			<name>filesetType</name>
			<value>Z3986</value>
		</parameter>						
	</task>
	
	
	<!-- ***************
	      Audio encoder
	     *************** -->
	<task name="se_tpb_dtbAudioEncoder" interactive="false">
		<parameter>
			<name>manifest</name>
			<value>${outputPath}/z3986/06-speechgen.opf</value>
		</parameter>					
		<parameter>
			<name>outDir</name>
			<value>${outputPath}/z3986-mp3</value>
		</parameter>						
	</task>
	
	
	<!-- ************************************
	      Z3986-2005 to Daisy 2.02 Converter
	     ************************************ -->
	<task name="se_tpb_zed2daisy202" interactive="false">
		<parameter>
			<name>manifest</name>
			<value>${outputPath}/z3986-mp3/06-speechgen.opf</value>
		</parameter>					
		<parameter>
			<name>outDir</name>
			<value>${outputPath}/daisy202</value>
		</parameter>				
	</task>

	
	<!-- *************************
	      Daisy 2.02 Validation 
	     ************************* -->
	<task name="int_daisy_validator" interactive="false">
		<parameter>
			<name>input</name>
			<value>${outputPath}/daisy202/ncc.html</value>
		</parameter>		
		<parameter>
			<name>abortThreshold</name>
			<value>WARNING</value>
		</parameter>
	</task>
	
</taskScript>
